(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{2226:function(e,t,r){Promise.resolve().then(r.bind(r,2291))},2291:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(7437),o=r(2265),a=r(4033),i=r(9727);function u(){let e=(0,a.useRouter)();return(0,o.useEffect)(()=>{let t=(0,i.ts)();t&&"admin"===t.role||e.replace("/login")},[e]),(0,n.jsx)("main",{className:"container mx-auto py-12",children:(0,n.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Espace Administrateur"})})}},9727:function(e,t,r){"use strict";r.d(t,{B3:function(){return d},VA:function(){return a},a$:function(){return c},pH:function(){return l},ts:function(){return f}});let n="supiga_users",o="supiga_session";function a(e){let t=(e||"").toLowerCase();return"admin"===t?"admin":"prof"===t||"professor"===t?"prof":"parent"===t?"parent":"student"}function i(){return"undefined"!=typeof localStorage}function u(){if(!i())return[];try{let e=localStorage.getItem(n);return e?JSON.parse(e):[]}catch(e){return[]}}async function s(e){if(!i()||!(window.crypto&&window.crypto.subtle))return"sha256:".concat(btoa(unescape(encodeURIComponent(e))));let t=new TextEncoder,r=t.encode(e),n=await window.crypto.subtle.digest("SHA-256",r);return"sha256:".concat(function(e){let t=new Uint8Array(e);return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}(n))}async function c(e){var t;if(!i())return{ok:!1,error:"Client requis"};let r=u(),o=r.some(t=>t.email.toLowerCase()===e.email.toLowerCase());if(o)return{ok:!1,error:"Un utilisateur avec cet email existe d\xe9j\xe0"};let c=crypto.randomUUID?crypto.randomUUID():"".concat(Date.now(),"-").concat(Math.random()),l=a(e.role),f=await s(e.password),d={id:c,email:e.email,passwordHash:f,role:l,firstName:e.firstName,lastName:e.lastName,department:e.department,createdAt:new Date().toISOString()};return t=[...r,d],i()&&localStorage.setItem(n,JSON.stringify(t)),{ok:!0}}async function l(e,t){if(!i())return{ok:!1,error:"Client requis"};let r=u(),n=r.find(t=>t.email.toLowerCase()===e.toLowerCase());if(!n)return{ok:!1,error:"Email ou mot de passe incorrect"};let a=await s(t);return a!==n.passwordHash?{ok:!1,error:"Email ou mot de passe incorrect"}:(!function(e){if(i()){e?localStorage.setItem(o,JSON.stringify(e)):localStorage.removeItem(o);try{window.dispatchEvent(new StorageEvent("storage",{key:o}))}catch(e){}}}({userId:n.id,email:n.email,role:n.role}),{ok:!0,role:n.role})}function f(){let e=function(){if(!i())return null;try{let e=localStorage.getItem(o);return e?JSON.parse(e):null}catch(e){return null}}();if(!e)return null;let t=u(),r=t.find(t=>t.id===e.userId);return r||null}function d(e){switch(e){case"admin":return"/admin";case"prof":return"/prof";case"parent":return"/parent";default:return"/dashboard"}}},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2265),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,a={},c=null,l=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)i.call(t,n)&&!s.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:o,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(290)}},function(e){e.O(0,[971,864,744],function(){return e(e.s=2226)}),_N_E=e.O()}]);