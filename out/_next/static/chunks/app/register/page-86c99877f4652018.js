(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{8003:function(e,r,t){Promise.resolve().then(t.bind(t,6099))},6099:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return u}});var n=t(7437),o=t(2265),a=t(4033),s=t(9727),l=t(1396),d=t.n(l);function u(){let e=(0,a.useRouter)(),[r,t]=(0,o.useState)({firstName:"",lastName:"",email:"",password:"",role:"student",department:""}),[l,u]=(0,o.useState)(""),i=async t=>{t.preventDefault(),u("");try{let t=await (0,s.a$)({firstName:r.firstName,lastName:r.lastName,department:r.department,email:r.email,password:r.password,role:(0,s.VA)(r.role)});t.ok?e.push("/login"):u(t.error)}catch(e){u("Une erreur est survenue lors de l'inscription")}};return(0,n.jsxs)("div",{className:"min-h-screen bg-background flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,n.jsx)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:(0,n.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-foreground",children:"Cr\xe9er un compte"})}),(0,n.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,n.jsxs)("div",{className:"bg-card py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[(0,n.jsxs)("form",{className:"space-y-6",onSubmit:i,children:[l&&(0,n.jsx)("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 text-red-600 dark:text-red-200 px-4 py-3 rounded",children:l}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-foreground",children:"Pr\xe9nom"}),(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)("input",{id:"firstName",name:"firstName",type:"text",required:!0,className:"appearance-none block w-full px-3 py-2 border border-input rounded-md shadow-sm placeholder:text-muted-foreground bg-background text-foreground focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.firstName,onChange:e=>t({...r,firstName:e.target.value})})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-foreground",children:"Nom"}),(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)("input",{id:"lastName",name:"lastName",type:"text",required:!0,className:"appearance-none block w-full px-3 py-2 border border-input rounded-md shadow-sm placeholder:text-muted-foreground bg-background text-foreground focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.lastName,onChange:e=>t({...r,lastName:e.target.value})})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground",children:"Email"}),(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-input rounded-md shadow-sm placeholder:text-muted-foreground bg-background text-foreground focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.email,onChange:e=>t({...r,email:e.target.value})})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground",children:"Mot de passe"}),(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-input rounded-md shadow-sm placeholder:text-muted-foreground bg-background text-foreground focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.password,onChange:e=>t({...r,password:e.target.value})})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-foreground",children:"R\xf4le"}),(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsxs)("select",{id:"role",name:"role",required:!0,className:"appearance-none block w-full px-3 py-2 border border-input rounded-md shadow-sm placeholder:text-muted-foreground bg-background text-foreground focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.role,onChange:e=>t({...r,role:e.target.value}),children:[(0,n.jsx)("option",{value:"student",children:"\xc9tudiant"}),(0,n.jsx)("option",{value:"professor",children:"Professeur"})]})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"department",className:"block text-sm font-medium text-foreground",children:"D\xe9partement"}),(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)("input",{id:"department",name:"department",type:"text",required:!0,className:"appearance-none block w-full px-3 py-2 border border-input rounded-md shadow-sm placeholder:text-muted-foreground bg-background text-foreground focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.department,onChange:e=>t({...r,department:e.target.value})})})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-background",children:"S'inscrire"})})]}),(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,n.jsxs)("span",{className:"px-2 bg-card text-muted-foreground",children:["D\xe9j\xe0 un compte ?"," ",(0,n.jsx)(d(),{href:"/login",className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"Se connecter"})]})})})})]})})]})}},9727:function(e,r,t){"use strict";t.d(r,{B3:function(){return m},VA:function(){return a},a$:function(){return u},pH:function(){return i},ts:function(){return c}});let n="supiga_users",o="supiga_session";function a(e){let r=(e||"").toLowerCase();return"admin"===r?"admin":"prof"===r||"professor"===r?"prof":"parent"===r?"parent":"student"}function s(){return"undefined"!=typeof localStorage}function l(){if(!s())return[];try{let e=localStorage.getItem(n);return e?JSON.parse(e):[]}catch(e){return[]}}async function d(e){if(!s()||!(window.crypto&&window.crypto.subtle))return"sha256:".concat(btoa(unescape(encodeURIComponent(e))));let r=new TextEncoder,t=r.encode(e),n=await window.crypto.subtle.digest("SHA-256",t);return"sha256:".concat(function(e){let r=new Uint8Array(e);return Array.from(r).map(e=>e.toString(16).padStart(2,"0")).join("")}(n))}async function u(e){var r;if(!s())return{ok:!1,error:"Client requis"};let t=l(),o=t.some(r=>r.email.toLowerCase()===e.email.toLowerCase());if(o)return{ok:!1,error:"Un utilisateur avec cet email existe d\xe9j\xe0"};let u=crypto.randomUUID?crypto.randomUUID():"".concat(Date.now(),"-").concat(Math.random()),i=a(e.role),c=await d(e.password),m={id:u,email:e.email,passwordHash:c,role:i,firstName:e.firstName,lastName:e.lastName,department:e.department,createdAt:new Date().toISOString()};return r=[...t,m],s()&&localStorage.setItem(n,JSON.stringify(r)),{ok:!0}}async function i(e,r){if(!s())return{ok:!1,error:"Client requis"};let t=l(),n=t.find(r=>r.email.toLowerCase()===e.toLowerCase());if(!n)return{ok:!1,error:"Email ou mot de passe incorrect"};let a=await d(r);return a!==n.passwordHash?{ok:!1,error:"Email ou mot de passe incorrect"}:(!function(e){if(s()){e?localStorage.setItem(o,JSON.stringify(e)):localStorage.removeItem(o);try{window.dispatchEvent(new StorageEvent("storage",{key:o}))}catch(e){}}}({userId:n.id,email:n.email,role:n.role}),{ok:!0,role:n.role})}function c(){let e=function(){if(!s())return null;try{let e=localStorage.getItem(o);return e?JSON.parse(e):null}catch(e){return null}}();if(!e)return null;let r=l(),t=r.find(r=>r.id===e.userId);return t||null}function m(e){switch(e){case"admin":return"/admin";case"prof":return"/prof";case"parent":return"/parent";default:return"/dashboard"}}},622:function(e,r,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=t(2265),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function u(e,r,t){var n,a={},u=null,i=null;for(n in void 0!==t&&(u=""+t),void 0!==r.key&&(u=""+r.key),void 0!==r.ref&&(i=r.ref),r)s.call(r,n)&&!d.hasOwnProperty(n)&&(a[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===a[n]&&(a[n]=r[n]);return{$$typeof:o,type:e,key:u,ref:i,props:a,_owner:l.current}}r.Fragment=a,r.jsx=u,r.jsxs=u},7437:function(e,r,t){"use strict";e.exports=t(622)},1396:function(e,r,t){e.exports=t(4724)},4033:function(e,r,t){e.exports=t(290)}},function(e){e.O(0,[724,971,864,744],function(){return e(e.s=8003)}),_N_E=e.O()}]);